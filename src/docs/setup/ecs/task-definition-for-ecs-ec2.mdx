---
title: 'Install AWS OTel Collector using EC2 Task Definition'
description:
    In this tutorial, we will demonstrate how to install AWS OTel Collector using EC2 Task Definition on the Amazon
    Elastic Container Service (Amazon ECS).
path: '/docs/setup/ecs/task-definition-for-ecs-ec2'
---

import SectionSeparator from "components/MdxSectionSeparator/sectionSeparator.jsx"
import { Link } from "gatsby"
import task1 from "assets/img/docs/setup/ecs/task-definition/task-definition-ec2.png"

In this tutorial, we will demonstrate how to install AWS OTel Collector using EC2 Task Definition on the Amazon Elastic
Container Service (Amazon ECS).

<SectionSeparator />

### Setup for ECS EC2
1. [Download the ECS EC2 task definition template](https://github.com/aws-observability/aws-otel-collector/blob/master/examples/ecs/ecs-ec2-sidecar.json) on GitHub.
2. Fill the following parameters in the task definition templates:
    * `{{region}}` - the region the data will be sent to
    * `{{ecsTaskRoleArn}}` - AWSObservabilityRole ARN defined above
    * `{{ecsExecutionRoleArn}}` - AWSObservabilityRole ARN defined above
    * `command` -  Assign value to the command variable to select the config file path; the AWS collector comes with
                   two configs baked in for ECS customers(choose one of them based on your purpose):
                   `--config=/etc/ecs/otel-agent-ecs-default-config.yaml` - To consome OTPL metrics/traces and X-Ray SDK traces (custom application metrics/traces)
                   `--config=/etc/ecs/container-insights/otel-task-metrics-config.yaml` - To Use OTPL, Xray and Container Resource utilization metrics
3. Follow the [ECS EC2 setup instructions](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/getting-started-ecs-ec2.html)
to setup ECS Cluster and the task definition. Then run AWS OTel Collector as a sidecar.
4. After ECS is set up and running, you should see AWS OTel Collector running as sidecar process along with your sample applications.
<img src={task1} alt="Diagram" style="margin: 30px 0;" />
